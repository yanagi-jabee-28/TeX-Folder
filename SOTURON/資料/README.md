# PDF to Markdown 変換ガイド

このディレクトリには、PDFファイルからMarkdown形式への変換結果が格納されています。

## 📋 ファイル一覧

### 変換済みファイル

#### `18_167_formatted.md`（最終版）
- **状態**: 完全に読める形式に整理済み
- **内容**: サブテラヘルツ帯材料計測技術に関する技術論文
- **特徴**:
  - セクション構造を論理的に再構成
  - 数式とリスト形式で視認性向上
  - 図・表への参照を保持
  - 参考文献を完全に整理
  - 著者情報を追加

## 🔄 変換流れ

PDFをMarkdownに変換するプロセスは以下の2段階で構成されます：

### ステップ1: 自動抽出（Pythonスクリプト）
**スクリプト**: `script/pdf_to_markdown.py`

```bash
# デフォルト（18_167.pdfを変換）
python script/pdf_to_markdown.py

# 任意のPDFを変換
python script/pdf_to_markdown.py 資料/your_file.pdf

# 出力先を指定
python script/pdf_to_markdown.py 資料/your_file.pdf -o 資料/output.md
```

**自動処理内容**:
- PDFから全テキストを抽出
- 空のテーブル（レイアウト用）を除外
- テキストをクリーンアップ
- 分割された日本語を結合
- 見出しを自動検出
- 段落の再構成

**出力**:
- ファイル名: `[元のファイル名]_extracted.md`
- ファイルサイズ: ~21 KB
- 構造がある程度整理される

### ステップ2: 手動編集（最終整形）

自動抽出の結果を基に、以下を実施：

1. **セクション構造の再構成**
   - 論理的な章立てを作成
   - 内容を逐次的に整理

2. **テキストの正規化**
   - 2段組で分割されたテキストを統合
   - 同義の重複をマージ

3. **フォーマッティング**
   - リスト形式の統一
   - 数式の LaTeX 記法への変換
   - 表の追加作成

4. **メタデータの追加**
   - 著者情報
   - 参考文献リスト
   - セクションリンク

**出力**: `18_167_formatted.md`（最終版）

---

## 📚 使用方法

### 既に変換されたファイルを使用する場合

```bash
# 最終版ファイルを確認
cat 18_167_formatted.md

# エディタで開く
code 18_167_formatted.md
```

### 新しいPDFを変換する場合

1. **PDFファイルを資料フォルダに配置**
   ```
   資料/your_file.pdf
   ```

2. **変換スクリプトを実行**
   ```bash
   # 基本的な使い方
   python script/pdf_to_markdown.py 資料/your_file.pdf
   
   # 出力ファイル名を指定
   python script/pdf_to_markdown.py 資料/your_file.pdf -o 資料/your_file_extracted.md
   ```

3. **出力ファイルを手動編集**
   ```bash
   # 自動生成ファイルを確認
   cat 資料/your_file_extracted.md
   
   # 新しい最終版を作成
   cp 資料/your_file_extracted.md 資料/your_file_formatted.md
   # エディタで開いて手動で整形
   code 資料/your_file_formatted.md
   ```

---

## 🛠️ スクリプト仕様

### 共通の依存パッケージ

```bash
pip install pdfplumber
```

### 各スクリプトの機能比較

| スクリプト | 処理内容 | 出力サイズ | 用途 |
|-----------|---------|----------|------|
| `pdf_to_markdown.py` | 全自動変換（テキスト抽出 + クリーンアップ + 見出し検出） | ~21 KB | **推奨: 初期変換** |
| 手動編集 | 全面的な再構成 | ~10-15 KB | **必須: 最終版作成** |

---

## ✅ 品質チェックリスト

変換後のMarkdownファイルが以下の条件を満たしているか確認してください：

- [ ] テキストが通読可能か
- [ ] セクション構造が明確か
- [ ] 数式が正しく記述されているか
- [ ] テーブルが正しくフォーマットされているか
- [ ] 参考文献が完全か
- [ ] 著者情報が記載されているか
- [ ] 図表への参照が保持されているか

---

## 📝 推奨事項

### 最終版で確認すべき項目

1. **内容の正確性**: PDFの原文と照合
2. **フォーマット**: Markdownの文法に適合しているか
3. **可読性**: 段落の長さが適切か
4. **参考文献**: 引用形式が統一されているか

### 今後の改善案

- [ ] 図・表の自動抽出機能の強化
- [ ] OCR機能を用いた画像テキスト抽出
- [ ] 数式の自動検出・LaTeX変換
- [ ] 複数PDFの一括変換ツール化

---

## 📞 トラブルシューティング

### 文字化けが発生する場合

```python
# ファイルの文字コードを確認
file 資料/18_167_formatted.md

# UTF-8に変換
iconv -f SHIFT_JIS -t UTF-8 input.md -o output.md
```

### テーブルが崩れている場合

- 元のPDFのテーブル構造を確認
- 必要に応じて手動で修正
- Markdown形式のテーブル仕様を確認

### スクリプトが動作しない場合

```bash
# 依存パッケージを再インストール
pip install --upgrade pdfplumber

# Pythonバージョンを確認
python --version  # 3.8以上推奨
```

---

**最終更新**: 2026年1月26日  
**バージョン**: 1.0
